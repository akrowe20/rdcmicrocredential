---
title: "Microcredential Project"
format: html
editor: visual

The purpose of this study is to explore global primate densities in association with deforestation and defaunation. To meet this goal, we will be using an updated TetraDensity dataset with just the density values for primates extracted.

The first step to complete these analyses is to prepare the datasets. We first want a dataset that that has all of the primate density values and information about traits for each primate

To do this, we have 2 datasets that already match via a column called sp_id.

Trait data is from COMBINE dataset: a coalesced mammal databased of intrinsic and extrinsic traits: https://doi.org/10.1002/ecy.3344
---

```{r}
#First read in both the density and trait data
density = read.csv("Data/Primate_density.csv")
traits = read.csv("Data/TRAITS_Primates.csv")

#Next I will merge the two datasets using the sp_id column

density_traits = merge(x = density, y = traits, by = "sp_id")

head(density_traits)


```

```{r}
#Next, I would like to use the ESA GlobCover dataset (https://developers.google.com/earth-engine/datasets/catalog/ESA_GLOBCOVER_L4_200901_200912_V2_3?hl=en) to extract percentage of different land cover types per cell (once rescaled at a lower resolution) or any fragmentation measure (e.g. mean distance from edge, mean patch size)

#To do this I will need the packages raster or terra for handling raster data and landscapemetrics of calculating fragmentation and land cover proportions

install.packages(c("raster", "terra", "sf", "landscapeemtrics", "rgdal"))

#I first needed to save the ESA GlobCover dataset as a GeoTiff in the Google Earth Engine using the following javascript 
var globcover = ee.Image('ESA/GLOBCOVER_L4_200901_200912_V2_3');
// Define the global export region

// Define the global export region
var globalRegion = ee.Geometry.Polygon(
  [[[-180, -90], [180, -90], [180, 90], [-180, 90]]]
);


// Set export parameters
Export.image.toDrive({
  image: globcover,
  description: 'GlobCover_Export_Global',
  folder: 'EarthEngineExports',
  fileNamePrefix: 'GlobCover_2009_Global',
  region: globalRegion,
  scale: 300,  // GlobCover's native resolution
  crs: 'EPSG:4326',  // WGS 84
  maxPixels: 1e13  // Large value to accommodate the global scale
});
```

```{r}
#Once I have the .tif, I can now move forwrd with the analysis by first rescaling the image


```

## Quarto

Quarto enables you to weave together content and executable code into a finished document. To learn more about Quarto see <https://quarto.org>.

## Running Code

When you click the **Render** button a document will be generated that includes both content and the output of embedded code. You can embed code like this:

```{r}
1 + 1
```

You can add options to executable code like this

```{r}
#| echo: false
2 * 2
```

The `echo: false` option disables the printing of code (only output is displayed).
